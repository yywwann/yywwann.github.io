<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>各种情况下的操作白皮书 | ハν</title><meta name="author" content="chy"><meta name="copyright" content="chy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="各种看了又忘忘了又看">
<meta property="og:type" content="article">
<meta property="og:title" content="各种情况下的操作白皮书">
<meta property="og:url" content="http://ccccchy.top/2021/07/21/%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6/index.html">
<meta property="og:site_name" content="ハν">
<meta property="og:description" content="各种看了又忘忘了又看">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/wallpaper/wallpaper_1626846848.jpg">
<meta property="article:published_time" content="2021-07-21T02:53:35.000Z">
<meta property="article:modified_time" content="2022-01-17T08:48:04.483Z">
<meta property="article:author" content="chy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/wallpaper/wallpaper_1626846848.jpg"><link rel="shortcut icon" href="http://chy-cdn.oss-cn-hangzhou.aliyuncs.com/blog/favicon.png"><link rel="canonical" href="http://ccccchy.top/2021/07/21/%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '各种情况下的操作白皮书',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-01-17 16:48:04'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="http://chy-cdn.oss-cn-hangzhou.aliyuncs.com/blog/avatar_img.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/wallpaper/wallpaper_1626846848.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">ハν</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">各种情况下的操作白皮书</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-07-21T02:53:35.000Z" title="发表于 2021-07-21 10:53:35">2021-07-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-01-17T08:48:04.483Z" title="更新于 2022-01-17 16:48:04">2022-01-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%B0%E5%BD%95/">记录</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="各种情况下的操作白皮书"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="各种情况下的操作白皮书"><a href="#各种情况下的操作白皮书" class="headerlink" title="各种情况下的操作白皮书"></a>各种情况下的操作白皮书</h1><hr>
<h1 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h1><h2 id="安装ZSH"><a href="#安装ZSH" class="headerlink" title="安装ZSH"></a>安装ZSH</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/silentims/p/13740267.html">https://www.cnblogs.com/silentims/p/13740267.html</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum install zsh -y</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install git -y</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install wget -y</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编辑 install.sh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim install.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 把</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> REPO=<span class="variable">$&#123;REPO:-ohmyzsh/ohmyzsh&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> REMOTE=<span class="variable">$&#123;REMOTE:-https://github.com/<span class="variable">$&#123;REPO&#125;</span>.git&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 替换为</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> REPO=<span class="variable">$&#123;REPO:-mirrors/oh-my-zsh&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> REMOTE=<span class="variable">$&#123;REMOTE:-https://gitee.com/<span class="variable">$&#123;REPO&#125;</span>.git&#125;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chomd +x install.sh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sh install.sh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~/.oh-my-zsh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote set-url origin https://gitee.com/mirrors/oh-my-zsh.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git pull</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> $ cat /etc/shells</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chsh -s /bin/zsh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> $ <span class="built_in">echo</span> <span class="variable">$SHELL</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim ~/.zshrc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改主题 ZSH_THEME=<span class="string">&quot;agnoster&quot;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> ~/.zshrc</span></span><br></pre></td></tr></table></figure>


<h2 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install -y git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global user.name <span class="string">&quot;yywwann&quot;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global user.email <span class="string">&quot;rxyhchen@163.com&quot;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">&quot;rxyhchen@163.com&quot;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git --version</span></span><br></pre></td></tr></table></figure>

<h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 卸载旧版本</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum remove docker \</span></span><br><span class="line"><span class="bash">                  docker-client \</span></span><br><span class="line"><span class="bash">                  docker-client-latest \</span></span><br><span class="line"><span class="bash">                  docker-common \</span></span><br><span class="line"><span class="bash">                  docker-latest \</span></span><br><span class="line"><span class="bash">                  docker-latest-logrotate \</span></span><br><span class="line"><span class="bash">                  docker-logrotate \</span></span><br><span class="line"><span class="bash">                  docker-engine</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置仓库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install -y yum-utils</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum-config-manager \</span></span><br><span class="line"><span class="bash">    --add-repo \</span></span><br><span class="line"><span class="bash">    https://download.docker.com/linux/centos/docker-ce.repo</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装Docker引擎 -y 就是一直yes</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 安装最新版本</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install -y docker-ce docker-ce-cli containerd.io</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 安装指定版本</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum list docker-ce --showduplicates | sort -r</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动Docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl start docker</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开机启动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl <span class="built_in">enable</span> docker</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证安装</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker run hello-world</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker version</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo docker ps --all</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker换源</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> https://www.cnblogs.com/wpwen/p/12652665.html</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 docker-compose</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install -y epel-release</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install -y docker-compose</span></span><br></pre></td></tr></table></figure>

<h2 id="安装Python"><a href="#安装Python" class="headerlink" title="安装Python"></a>安装Python</h2><ul>
<li>方法一</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum -y install python3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>方法二</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装python可能用到的依赖：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install -y openssl-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install -y wget</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://www.python.org/ftp/python/3.6.5/Python-3.6.5.tgz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar -zxvf Python-3.6.5.tgz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> Python-3.6.5/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./configure  --prefix=/usr/<span class="built_in">local</span>/python3</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> make install</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim  /etc/profile.d/python.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> python.sh</span> </span><br><span class="line">PATH=/usr/local/python3/bin:$PATH</span><br><span class="line"><span class="meta">#</span><span class="bash"> 保存退出后重读配置文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> /etc/profile.d/python.sh</span></span><br></pre></td></tr></table></figure>

<h2 id="pip换源"><a href="#pip换源" class="headerlink" title="pip换源"></a>pip换源</h2><ul>
<li>一次</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pip3 install docker-compose -i https://pypi.tuna.tsinghua.edu.cn/simple --trusted-host pypi.tuna.tsinghua.edu.cn</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -i https://pypi.douban.com/simple</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -i http://mirrors.aliyun.com/pypi/simple/</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> -i https://pypi.mirrors.ustc.edu.cn/simple/</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> -i http://pypi.douban.com/simple/</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> -i https://pypi.tuna.tsinghua.edu.cn/simple/</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> -i http://pypi.mirrors.ustc.edu.cn/simple/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>永久</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir .pip</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> .pip</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim pip.conf</span></span><br><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">[install]</span><br><span class="line">trusted-host = mirrors.aliyun.com</span><br></pre></td></tr></table></figure>

<h2 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 开放端口</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> firewall-cmd --zone=public --add-port=5672/tcp --permanent   <span class="comment">#  开放5672端口</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> firewall-cmd --zone=public --remove-port=5672/tcp --permanent  <span class="comment"># 关闭5672端口</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> firewall-cmd --reload   <span class="comment">#  配置立即生效</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看防火墙所有开放的端口</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> firewall-cmd --zone=public --list-ports</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭防火墙</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果要开放的端口太多，嫌麻烦，可以关闭防火墙，安全性自行评估</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl stop firewalld.service</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 临时关闭防火墙,重启后会重新自动打开</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl restart firewalld</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查防火墙状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> firewall-cmd --state</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> firewall-cmd --list-all</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Disable firewall</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl <span class="built_in">disable</span> firewalld</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl stop firewalld</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl status firewalld</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Enable firewall</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl <span class="built_in">enable</span> firewalld</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl start firewalld</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl status firewalld</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看监听的端口</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> netstat -lnpt</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查端口被哪个进程占用</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> netstat -lnpt |grep 5672</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看进程的详细信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ps 6832</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 中止进程</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">kill</span> -9 6832</span></span><br></pre></td></tr></table></figure>



<h2 id="历史命令查找工具FZF"><a href="#历史命令查找工具FZF" class="headerlink" title="历史命令查找工具FZF"></a>历史命令查找工具FZF</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> --depth 1 https://github.com/junegunn/fzf.git ~/.fzf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> $ git <span class="built_in">clone</span> --depth 1 https://gitee.com/mirrors/fzf.git ~/.fzf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ~/.fzf/install</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> ~/.fzf.zsh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> ~/.zshrc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果使用 bash 就把 zsh 换成 bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> $ <span class="built_in">echo</span> <span class="variable">$SHELL</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> $ <span class="built_in">source</span> ~/.bashrc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> $ ~/.fzf/uninstall</span></span><br></pre></td></tr></table></figure>

<h2 id="查看当前占用CPU-内存最多的10个进程"><a href="#查看当前占用CPU-内存最多的10个进程" class="headerlink" title="查看当前占用CPU/内存最多的10个进程"></a>查看当前占用CPU/内存最多的10个进程</h2><p>可以用以下命令查看使用内存最多的10个进程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ps -aux|head -1;ps -aux|sort -k4nr|head -10</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li>a指代all——所有的进程</li>
<li>u指代userid——执行该进程的用户id</li>
<li>x指代显示所有程序，不以终端机来区分</li>
</ul>
<p>ps -aux的输出格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root      39002  0.9  5.5 12164084 1805100 ?    Ssl  11月11  22:37 java -jar -*.jar</span><br></pre></td></tr></table></figure>

<p>sort -k4nr中:</p>
<ul>
<li>k代表从第几个位置开始，后面的数字4即是其开始位置，结束位置如果没有，则默认到最后</li>
<li>n指代numberic sort，根据其数值排序</li>
<li>r指代reverse，这里是指反向比较结果，输出时默认从小到大，反向后从大到小</li>
<li>本例中，%MEM在第4个位置，根据%MEM的数值进行由大到小的排序</li>
</ul>
<h1 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h1><ul>
<li>快速创建项目</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pip3 install django</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> django-admin startproject &lt;django_demo&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> python manage.py startapp &lt;app_name&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> python manage.py runserve &lt;ip:port&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>导出导入数据库</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 导出</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> python manage.py dumpdata [appname 没有的话就是全部数据] &gt; appname_data.json</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 导入</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> python manage.py loaddata appname_data.json</span></span><br></pre></td></tr></table></figure>


<ul>
<li>获取容器ID并运行命令, 创建超级管理员。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps <span class="comment"># 找出容器id</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it container_id python manage.py createsuperuser</span></span><br></pre></td></tr></table></figure>


<h2 id="定时任务-失败，没有成功"><a href="#定时任务-失败，没有成功" class="headerlink" title="定时任务(失败，没有成功)"></a>定时任务(失败，没有成功)</h2><ul>
<li>编写任务</li>
</ul>
<blockquote>
<p><code>django-crontab</code>只能在linux系统下使用, win10可以使用docker容器</p>
</blockquote>
<p>安装： <code>pip install django-crontab</code><br>将django_crontab注册到install app中<br>编写你的定时任务函数(我的是编写一个发送邮件的任务函数)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.core.mail <span class="keyword">import</span> send_mail</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> django.template.loader <span class="keyword">import</span> render_to_string</span><br><span class="line"><span class="keyword">from</span> task.models <span class="keyword">import</span> Task</span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_task_email</span>():</span></span><br><span class="line">    user_list = User.objects.<span class="built_in">filter</span>()</span><br><span class="line">    <span class="keyword">for</span> user <span class="keyword">in</span> user_list:</span><br><span class="line">        tasks = Task.objects.<span class="built_in">filter</span>(status=<span class="literal">False</span>, user=user)</span><br><span class="line">        <span class="keyword">if</span> tasks:</span><br><span class="line">            html_message = render_to_string(<span class="string">&#x27;task/task.html&#x27;</span>, &#123;<span class="string">&#x27;tasks&#x27;</span>: tasks, <span class="string">&#x27;user&#x27;</span>: user&#125;)</span><br><span class="line">            subject = <span class="string">&#x27;任务提醒&#x27;</span></span><br><span class="line">            message = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            sender = settings.EMAIL_FROM</span><br><span class="line">            receiver = [user.email]</span><br><span class="line">            send_mail(subject, message, sender, receiver, html_message=html_message)</span><br></pre></td></tr></table></figure>

<ul>
<li>在settings中配置任务</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">CRONJOBS = [</span><br><span class="line">    (<span class="string">&#x27;00 10 * * *&#x27;</span>, <span class="string">&#x27;task.scheduled_task.send_task_email&#x27;</span>, <span class="string">&#x27;&gt;&gt;task.log&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>任务队列是一个列表,里面的每个元祖元素都是一个任务对象，<br>任务对象的的第一个参数为执行时间,<code>00 10 * * *</code>是每天10点执行  </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># crontab范例</span><br><span class="line"># 每五分钟执行    */5 * * * *</span><br><span class="line"># 每小时执行      0 * * * *</span><br><span class="line"># 每天执行        0 0 * * *</span><br><span class="line"># 每周执行        0 0 * * 0</span><br><span class="line"># 每月执行        0 0 1 * *</span><br></pre></td></tr></table></figure>

<p>第二个参数为任务函数的路径<br>第三个为log的位置  </p>
<ul>
<li>操作定时任务</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps <span class="comment">#  找出容器id</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it container_id python manage.py crontab add</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加任务 `python manage.py crontab add`</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看任务 `python manage.py crontab show`</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除任务 `python manage.py crontab remove`</span></span><br></pre></td></tr></table></figure>


<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动 docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启 docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl daemon-reload</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl restart docker</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1、查看当前docker容器中已有的image</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker image ls</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2、查看所有的容器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps -a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3、批量停止在运行中的容器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps -a | grep <span class="string">&#x27;Up&#x27;</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>| xargs docker container stop</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4、批量删除Exited状态的容器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps -a | grep <span class="string">&#x27;Exited&#x27;</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>| xargs docker container rm</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5、批量删除name为none的image</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker image ls | grep none | awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span> | xargs docker image rm</span></span><br></pre></td></tr></table></figure>



<h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看帮助</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose -h</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -f  指定使用的 Compose 模板文件，默认为 docker-compose.yml，可以多次指定。</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose -f docker-compose.yml up -d</span> </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动所有容器，-d 将会在后台启动并运行所有的容器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose up -d</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停用移除所有容器以及网络相关</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose down</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看服务容器的输出</span></span><br><span class="line"><span class="meta">$</span><span class="bash">docker-compose logs</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 列出项目中目前的所有容器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose ps</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 构建（重新构建）项目中的服务容器。服务容器一旦构建后，将会带上一个标记名，例如对于 web 项目中的一个 db 容器，可能是 web_db。可以随时在项目目录下运行 docker-compose build 来重新构建服务</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose build</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 拉取服务依赖的镜像</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose pull</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启项目中的服务</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose restart</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除所有（停止状态的）服务容器。推荐先执行 docker-compose stop 命令来停止容器。</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose rm</span> </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在指定服务上执行一个命令。</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose run ubuntu ping docker.com</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置指定服务运行的容器个数。通过 service=num 的参数来设置数量</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose scale web=3 db=2</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动已经存在的服务容器。</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose start</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止已经处于运行状态的容器，但不删除它。通过 docker-compose start 可以再次启动这些容器。</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker-compose stop</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 参考 https://lilogs.com/archives/1440.html</span></span><br></pre></td></tr></table></figure>

<h2 id="查看volumes挂载的位置"><a href="#查看volumes挂载的位置" class="headerlink" title="查看volumes挂载的位置"></a>查看volumes挂载的位置</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker inspect &lt;容器 id&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 然后找到 mounts 中的 <span class="built_in">source</span></span></span><br></pre></td></tr></table></figure>



<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://lilogs.com/archives/970.html</span><br></pre></td></tr></table></figure>



<h2 id="发布镜像"><a href="#发布镜像" class="headerlink" title="发布镜像"></a>发布镜像</h2><p><img src="https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6/%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6_1627010590.png" alt="image-63"></p>
<h2 id="错误解决"><a href="#错误解决" class="headerlink" title="错误解决"></a>错误解决</h2><ul>
<li>ERROR: Get <a target="_blank" rel="noopener" href="https://registry-1.docker.io/v2/">https://registry-1.docker.io/v2/</a>: dial tcp: lookup registry-1.docker.io on [::1]:53: read udp [::1]:45622-&gt;[::1]:53: read: connection refused</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo vim /etc/resolv.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> add</span></span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line">nameserver 8.8.4.4</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl daemon-reload</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl restart docker</span></span><br></pre></td></tr></table></figure>

<h2 id="解决每次运行都需要-sudo"><a href="#解决每次运行都需要-sudo" class="headerlink" title="解决每次运行都需要 sudo"></a>解决每次运行都需要 sudo</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo groupadd docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo gpasswd -a <span class="variable">$USER</span> docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> newgrp docker</span></span><br></pre></td></tr></table></figure>



<h2 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vim /etc/docker/daemon.json</span></span><br><span class="line">&#123;</span><br><span class="line">    &quot;registry-mirrors&quot;:[</span><br><span class="line">         &quot;http://docker.mirrors.ustc.edu.cn&quot;,</span><br><span class="line">         &quot;http://hub-mirror.c.163.com&quot;,</span><br><span class="line">         &quot;http://registry.docker-cn.com&quot;</span><br><span class="line">    ] ,</span><br><span class="line">    &quot;insecure-registries&quot;:[</span><br><span class="line">       &quot;docker.mirrors.ustc.edu.cn&quot;,</span><br><span class="line">         &quot;registry.docker-cn.com&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;    </span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启 docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service docker restart</span> </span><br></pre></td></tr></table></figure>





<h2 id="io-timeout"><a href="#io-timeout" class="headerlink" title="io/timeout"></a>io/timeout</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ping xxx.xxx.xxx</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> get ip</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim /etc/hosts</span></span><br><span class="line">ip xxx.xxx.xxx</span><br></pre></td></tr></table></figure>



<h2 id="清理空间"><a href="#清理空间" class="headerlink" title="清理空间"></a>清理空间</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker system prune</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看docker所占的硬盘大小</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker system df</span></span><br></pre></td></tr></table></figure>



<h2 id="bind-和-volume-的区别"><a href="#bind-和-volume-的区别" class="headerlink" title="bind 和 volume 的区别"></a>bind 和 volume 的区别</h2><h1 id="Etcd"><a href="#Etcd" class="headerlink" title="Etcd"></a>Etcd</h1><ul>
<li>docker-compose.yml</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">etcd1:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">quay.io/coreos/etcd</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">etcd</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">ETCDCTL_API:</span> <span class="number">3</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data/etcd/etcd-data:/etcd-data</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">etcd</span> <span class="string">-name</span> <span class="string">etcd1</span> <span class="string">-advertise-client-urls</span> <span class="string">http://0.0.0.0:2379</span> <span class="string">-listen-client-urls</span> <span class="string">http://0.0.0.0:2379</span> <span class="string">-listen-peer-urls</span> <span class="string">http://0.0.0.0:2380</span> <span class="string">-initial-cluster-token</span> <span class="string">tkn</span> <span class="string">-initial-cluster-state</span> <span class="string">new</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;2379:2379&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;2380:2380&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>命令</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it etcd /bin/sh</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> ETCDCTL_API=3</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> etcd --version</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> etcdctl version <span class="comment"># 3  ( 2 $ etcdctl -v)</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> etcdctl put foo bar <span class="comment"># put k-v 值</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> etcdctl getfoo <span class="comment"># get k 值</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> etcdctl get --from-key <span class="string">&quot;&quot;</span> --keys-only <span class="comment"># 查看所有key</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="fail2ban"><a href="#fail2ban" class="headerlink" title="fail2ban"></a>fail2ban</h1><p>CentOS安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yum install fail2ban</span></span><br></pre></td></tr></table></figure>

<p>配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> /etc/fail2ban/jail.conf</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">#  以空格分隔的列表，可以是 IP 地址、CIDR 前缀或者 DNS 主机名</span><br><span class="line">#  用于指定哪些地址可以忽略 fail2ban 防御</span><br><span class="line">ignoreip = 127.0.0.1/8 ::1 42.192.50.232 183.138.11.158</span><br><span class="line"></span><br><span class="line">#  客户端主机被禁止的时长（秒）</span><br><span class="line">bantime = 86400</span><br><span class="line">     </span><br><span class="line">#  客户端主机被禁止前允许失败的次数 </span><br><span class="line">maxretry = 5</span><br><span class="line">     </span><br><span class="line">#  查找失败次数的时长（秒）</span><br><span class="line">findtime = 600</span><br><span class="line">     </span><br><span class="line">mta = sendmail</span><br><span class="line"></span><br><span class="line">#  根据上述配置，fail2ban会自动禁止在最近10分钟内有超过3次访问尝试失败的任意IP地址。一旦被禁，这个IP地址将会在24小时内一直被禁止访问 SSH 服务。这个事件也会通过sendemail发送邮件通知。     </span><br><span class="line">[ssh-iptables]</span><br><span class="line">enabled = true</span><br><span class="line">filter = sshd</span><br><span class="line">action = iptables[name=SSH, port=ssh, protocol=tcp]</span><br><span class="line">sendmail-whois[name=SSH, dest=your@email.com, sender=fail2ban@email.com]</span><br><span class="line">#  Debian 系的发行版 </span><br><span class="line">logpath = /var/log/auth.log</span><br><span class="line">#  Red Hat 系的发行版</span><br><span class="line">logpath = /var/log/secure</span><br><span class="line">#  ssh 服务的最大尝试次数 </span><br><span class="line">maxretry = 3</span><br><span class="line"></span><br><span class="line">[nginxno404]</span><br><span class="line"># 处理 nginx 下的恶意 404 结果扫描</span><br><span class="line">enabled = true</span><br><span class="line">port = http,https</span><br><span class="line">filter = nginx-not-found</span><br><span class="line">action = iptables[name=nginxno404, port=http, protocol=tcp]</span><br><span class="line"># Fail2Ban 要监控的站点日志文件，大家可以根据自己站点来灵活调整。</span><br><span class="line">logpath  = /root/etc/supervisor/var/log/noBB-drf-nginx-stdout.log   /root/etc/supervisor/var/log/noBB_web_back-stdout.log</span><br><span class="line">bantime = 3600 # 默认是屏蔽 IP 地址 10 分钟</span><br><span class="line"># 下面这两个是说 60 秒内 5 次 404 失败请求就开始屏蔽这个 IP 地址</span><br><span class="line">findtime = 60</span><br><span class="line">maxretry = 5</span><br></pre></td></tr></table></figure>

<p>vim /etc/fail2ban/filter.d/nginx-not-found.conf</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Definition]</span><br><span class="line">failregex = &lt;HOST&gt; -.* \[.*\] &quot;(GET|POST|HEAD).*HTTP.* (404|444|403|400)</span><br><span class="line">ignoreregex =</span><br></pre></td></tr></table></figure>

<p>一旦配置文件准备就绪，按照以下方式重启fail2ban服务。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> service fail2ban restart</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检查是否启动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo fail2ban-client ping</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置开机自启</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl <span class="built_in">enable</span> fail2ban</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试规则</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> fail2ban-regex /root/trash/test.log /etc/fail2ban/filter.d/nginx-not-found.conf --print-all-missed</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看日志</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tail -f /var/<span class="built_in">log</span>/fail2ban.log</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 iptables 防火墙的拦截</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> iptables --list -n</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 检验fail2ban状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> fail2ban-client status</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解除ip限制</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> fail2ban-client <span class="built_in">set</span> nginxno404  unbanip &lt;172.104.78.195&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看[nginxno404]这个监狱的运行状况来查看已经屏蔽的 IP 地址有哪些</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> fail2ban-client status nginxno404</span></span><br></pre></td></tr></table></figure>



<h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><h2 id="常用命令-1"><a href="#常用命令-1" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装git后</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global user.name <span class="string">&quot;Your Name&quot;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global user.email <span class="string">&quot;email@example.com&quot;</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">&quot;youremail@example.com&quot;</span> 创建ssh key，用于和github通信</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> (秘钥存储于C:\Users\27634\.ssh，把公钥id_rsa.pub存储于github)</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建版本库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">pwd</span> <span class="comment"># 命令用于显示当前目录(没啥用)</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git init <span class="comment"># 把这个目录变成Git可以管理的仓库(后续新建提交和ssh克隆需要)</span></span>	</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 操作版本库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add &lt;文件名&gt; <span class="comment"># 添加文件(新增或者更改都需要先add)</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">&quot;说明&quot;</span> <span class="comment"># 提交到本地版本库</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git status <span class="comment"># 查看仓库状态</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff &lt;文件名&gt; <span class="comment"># 查看修改的地方</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 版本回退(从一个commit恢复)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> <span class="comment"># 查看版本历史</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard HEAD^ <span class="comment"># 回退到上个版本</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard 1094a <span class="comment"># 回退到特定版本号(commit以后回退)</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reflog <span class="comment"># 记录每一次命令</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -- file <span class="comment"># 直接丢弃工作区的修改(add以前回退)</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset HEAD &lt;file&gt; <span class="comment"># 添加到了暂存区时，想丢弃修改(add以后回退)</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除文件</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git rm file <span class="comment"># (已经add/commit,在目录中删除)</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -- file <span class="comment"># 删错了回退</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 远程仓库</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote add origin git@server-name:path/repo-name.git <span class="comment"># 关联远程库</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push -u origin master <span class="comment"># 第一次的push</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin master <span class="comment"># 常用的push，本地分支会在服务器上新建分支</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git pull <span class="comment"># 需要有关联的分支，第一次下拉最好新建一个空文件夹</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch --set-upstream-to=origin/远程分支 本地分支 关联分支</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> git@server-name:path/repo-name.git <span class="comment"># 克隆(不需要另建文件夹)</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 分支</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -a <span class="comment"># 查看所有分支</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -vv <span class="comment"># 查看分支关联</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch dev <span class="comment"># 创建分支</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout dev <span class="comment"># 切换分支</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge dev <span class="comment"># 合并某分支到当前分支</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge --no-ff -m <span class="string">&quot;msg&quot;</span> dev <span class="comment"># 普通模式合并，合并后的历史有分支</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -d dev <span class="comment"># 删除分支</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -b dev <span class="comment"># 创建并切换分支</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 合并分支,无法merge</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git stash save 名字 <span class="comment"># 暂存工作状态</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git pull origin dev <span class="comment"># 拉下来</span></span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> git stash list <span class="comment"># 查看已经暂存的状态</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git stash pop stash@&#123;0&#125; <span class="comment"># 将暂存状态merge到当前分支</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 还有冲突时,手动修改文件,然后add/commit</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --graph <span class="comment"># 分支合并图</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> bug分支issue</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git stash <span class="comment"># 暂存工作状态</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git stash list <span class="comment"># 查看暂存工作状态</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git stash pop <span class="comment"># 恢复暂存状态并删除状态</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开发分支feature</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -D &lt;name&gt; <span class="comment"># 强制删除未合并的分支</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rebase</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git rebase <span class="comment"># 本地未push的分叉提交历史整理成直线</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 标签</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag 标签名 <span class="comment"># 打在最新提交的commit上</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag <span class="comment"># 查询所有标签</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag 标签名 f52c633 <span class="comment"># 给特定的commit打标签</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag -a 标签名 -m <span class="string">&quot;msg&quot;</span> commit的id <span class="comment"># 给标签设置说明</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show 标签名 <span class="comment"># 查询标签内容</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag -d 标签名 <span class="comment"># 删除标签</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin 标签名 <span class="comment"># 推送某个标签到远程</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin --tags <span class="comment"># 推送所有标签</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin :refs/tags/&lt;tagname&gt; <span class="comment"># 可以删除一个远程标签。</span></span></span><br></pre></td></tr></table></figure>

<h2 id="免密访问私有仓库"><a href="#免密访问私有仓库" class="headerlink" title="免密访问私有仓库"></a>免密访问私有仓库</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> global针对所有仓库，建议不要使用，</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global credential.helper store</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> git pull</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 输完账号密码以后就不用再输入了</span></span><br></pre></td></tr></table></figure>

<h2 id="git-commit-标准"><a href="#git-commit-标准" class="headerlink" title="git commit 标准"></a>git commit 标准</h2><p><img src="https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6/1625643042.png"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure>

<p><code>&lt;type&gt;</code><br>代表某次提交的类型，比如是修复一个 bug 或是增加一个 feature，类型如下：<br>类型 描述</p>
<p><code>&lt;scope&gt;</code><br>范围可以是指定提交更改位置的任何内容，如：</p>
<ul>
<li>对 package.json 文件新增依赖库，chore(package.json): 新增依赖库</li>
<li>或对代码进行重构，refacto(weChat.vue): 重构微信进件</li>
</ul>
<p><code>&lt;subject&gt;</code><br>如果没有更合适的范围，可以直接写提交内容</p>
<h2 id="修改已提交的-commit-信息"><a href="#修改已提交的-commit-信息" class="headerlink" title="修改已提交的 commit 信息"></a>修改已提交的 commit 信息</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend</span></span><br></pre></td></tr></table></figure>

<h2 id="合并多次-commit"><a href="#合并多次-commit" class="headerlink" title="合并多次 commit"></a>合并多次 commit</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git rebase -i HEAD~&lt;n:int 合并 n 条&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 把要被合并的 commit 的 pick 修改为 squash</span></span><br></pre></td></tr></table></figure>

<h2 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a>.gitignore</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git rm -r --cached .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">&#x27;update .gitignore&#x27;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>例子</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 此为注释 – 将被 Git 忽略</span><br><span class="line"> </span><br><span class="line">*.a       # 忽略所有 .a 结尾的文件</span><br><span class="line">!lib.a    # 但 lib.a 除外</span><br><span class="line">/TODO     # 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO</span><br><span class="line">build/    # 忽略 build/ 目录下的所有文件</span><br><span class="line">doc/*.txt # 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</span><br><span class="line"></span><br><span class="line">/gradle/wrapper/gradle-wrapper.properties</span><br><span class="line">##----------Android----------</span><br><span class="line"># build</span><br><span class="line">*.apk</span><br><span class="line">*.ap_</span><br><span class="line">*.dex</span><br><span class="line">*.class</span><br><span class="line">bin/</span><br><span class="line">gen/</span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line"># gradle</span><br><span class="line">.gradle/</span><br><span class="line">gradle-app.setting</span><br><span class="line">!gradle-wrapper.jar</span><br><span class="line">build/</span><br><span class="line"></span><br><span class="line">local.properties</span><br><span class="line"></span><br><span class="line">##----------idea----------</span><br><span class="line">*.iml</span><br><span class="line">.idea/</span><br><span class="line">*.ipr</span><br><span class="line">*.iws</span><br><span class="line"></span><br><span class="line"># Android Studio Navigation editor temp files</span><br><span class="line">.navigation/</span><br><span class="line"></span><br><span class="line">##----------Other----------</span><br><span class="line"># osx</span><br><span class="line">*~</span><br><span class="line">.DS_Store</span><br><span class="line">gradle.properties</span><br><span class="line">————————————————</span><br></pre></td></tr></table></figure>





<h1 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h1><h2 id="如何在新的win10系统配置Go环境"><a href="#如何在新的win10系统配置Go环境" class="headerlink" title="如何在新的win10系统配置Go环境"></a>如何在新的win10系统配置Go环境</h2><ul>
<li>安装</li>
</ul>
<ol>
<li>进入官网下载安装包, <a target="_blank" rel="noopener" href="https://golang.google.cn/dl/">https://golang.google.cn/dl/</a></li>
<li>运行安装包</li>
<li>go version 检查是否成功</li>
</ol>
<ul>
<li> 设置环境变量</li>
</ul>
<ol>
<li>GOPATH(工作目录)：编写代码的目录 <code>C:\Projects\GoProjects</code></li>
<li>GOROOT：指定go的安装路径。注意：为bin文件夹的上级目录  <code>C:\Go</code></li>
<li>PATH：/bin目录   <code>C:\Go\bin</code></li>
</ol>
<h2 id="Mac-升级-Go-版本"><a href="#Mac-升级-Go-版本" class="headerlink" title="Mac 升级 Go 版本"></a>Mac 升级 Go 版本</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 卸载旧的 go</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> rm -rf /usr/<span class="built_in">local</span>/go</span></span><br></pre></td></tr></table></figure>

<p>下载新版本<br><a target="_blank" rel="noopener" href="https://golang.google.cn/dl/">https://golang.google.cn/dl/</a><br>安装即可</p>
<h2 id="go-proxy"><a href="#go-proxy" class="headerlink" title="go proxy"></a>go proxy</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启用 Go Modules 功能</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go env -w GO111MODULE=on</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置 GOPROXY 环境变量，以下三选一</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1. 七牛 CDN</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go env -w  GOPROXY=https://goproxy.cn,direct</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 阿里云</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 官方</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go env -w  GOPROXY=https://goproxy.io,direct</span></span><br></pre></td></tr></table></figure>

<h2 id="go-私有库"><a href="#go-私有库" class="headerlink" title="go 私有库"></a>go 私有库</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> go env -w GOPRIVATE=gitlab.33.com</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ~/.gitconfig</span></span><br><span class="line">[url &quot;git@github.com:&quot;]</span><br><span class="line">    insteadOf = https://github.com/</span><br><span class="line">[url &quot;git@gitlab.33.cn:&quot;]</span><br><span class="line">    insteadOf = https://gitlab.33.cn/</span><br><span class="line">    </span><br><span class="line"><span class="meta">#</span><span class="bash"> https://segmentfault.com/a/1190000021127791</span></span><br></pre></td></tr></table></figure>



<h1 id="Goland"><a href="#Goland" class="headerlink" title="Goland"></a>Goland</h1><h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><ul>
<li>格式化代码</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Reformat Code  option+s</span><br></pre></td></tr></table></figure>

<h2 id="自动重置试用时间"><a href="#自动重置试用时间" class="headerlink" title="自动重置试用时间"></a>自动重置试用时间</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://gitee.com/pengzhile/ide-eval-resetter</span><br></pre></td></tr></table></figure>



<h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><ul>
<li>install node, npm</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> https://nodejs.org/en/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> to fix EACCES errors</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chown -R `whoami` ~/.npm</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chown -R `whoami` /usr/<span class="built_in">local</span>/lib/node_modules</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> npm 换成 阿里源</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 验证命令, 返回https://registry.npm.taobao.org，说明镜像配置成功。</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm config get registry</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装cnpm</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install -g cnpm --registry=https://registry.npm.taobao.org</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 以后npm安装的东西都用c开头，Understand?</span></span><br></pre></td></tr></table></figure>

<ul>
<li>install hexo</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cnpm install -g hexo-cli</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cnpm install -g hexo</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cnpm install -g hexo-deployer-git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cnpm install hexo-renderer-pug hexo-renderer-stylus --save</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Theme butterfly</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">参考 https://butterfly.js.org/</span><br></pre></td></tr></table></figure>

<ul>
<li>deploy 后需要重新设置域名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在`source`文件夹中创建`CNAME`文件, 内容为你的域名</span><br></pre></td></tr></table></figure>



<h1 id="Iterm2"><a href="#Iterm2" class="headerlink" title="Iterm2"></a>Iterm2</h1><p>新tab使用前一个tab 的路径</p>
<p><img src="https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6/1625643010.png"></p>
<p>有用的快捷键</p>
<ul>
<li>⌘ + d 横着分屏 / ⌘ + shift + d 竖着分屏</li>
<li>切换屏幕：command + option + 方向键 command + [ 或 command + ]</li>
<li>新建标签：command + t</li>
<li>切换标签：command + 数字 command + 左右方向键</li>
<li>清屏: command+r, ctrl+l</li>
</ul>
<p>主题和美化</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> https://sspai.com/post/63241</span></span><br><span class="line">插件建议直接从 github 下载 zip 文件比较快</span><br></pre></td></tr></table></figure>



<h1 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h1><p>docker-compose.yml</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">zoo:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">wurstmeister/zookeeper</span></span><br><span class="line">  <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">  <span class="attr">hostname:</span> <span class="string">zoo</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;2181:2181&quot;</span></span><br><span class="line">  <span class="attr">container_name:</span> <span class="string">zookeeper</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># kafka version: 1.1.0</span></span><br><span class="line"><span class="comment"># scala version: 2.12</span></span><br><span class="line"><span class="attr">kafka:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">wurstmeister/kafka</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;9092:9092&quot;</span></span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">KAFKA_ADVERTISED_HOST_NAME=localhost</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">KAFKA_ZOOKEEPER_CONNECT=zoo:2181</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">KAFKA_BROKER_ID=1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">KAFKA_CREATE_TOPICS=stream-in:1:1,stream-out:1:1</span></span><br><span class="line">  <span class="attr">depends_on:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">zoo</span></span><br><span class="line">  <span class="attr">container_name:</span> <span class="string">kafka</span></span><br></pre></td></tr></table></figure>



<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">一个 topic 包含多个分区, 每个消息根据键发送到指定分区</span><br><span class="line">消费者群组(内含多个消费者): 群组保证每个分区只能被一个消费者使用</span><br></pre></td></tr></table></figure>







<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it kafka /bin/bash</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --create --zookeeper zookeeper:2181 --replication-factor 1 --partitions 1 --topic <span class="built_in">test</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查询所有 topic</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --list --zookeeper zookeeper:2181</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 topic 信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --describe --zookeeper zookeeper:2181 --topic <span class="built_in">test</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动一个生产者</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-console-producer.sh --broker-list localhost:9092 --topic <span class="built_in">test</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动一个消费者</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic <span class="built_in">test</span> --from-beginning</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --create --zookeeper zookeeper:2181 --replication-factor 2 --partitions 2 --topic my-replicated-topic</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --describe --zookeeper zookeeper:2181 --topic my-replicated-topic</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Topic: my-replicated-topic	PartitionCount: 2	ReplicationFactor: 2	Configs:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	  Topic: my-replicated-topic	Partition: 0	Leader: 2	Replicas: 2,1Isr: 2</span></span><br><span class="line"><span class="meta">#</span><span class="bash">	  Topic: my-replicated-topic	Partition: 1	Leader: 1	Replicas: 1,2Isr: 1,2</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --alter --zookeeper zookeeper:2181 --partitions 16 --topic goim-zb_otc-topic</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --delete --zookeeper zookeeper:2181 --topic goim-zb_otc-topic</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> new api</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看所有 topic</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --bootstrap-server localhost:9092 --list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建 topic</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --bootstrap-server localhost:9092 --topic test16 --create --replication-factor 1 --partitions 16</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 topic 详细信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --bootstrap-server localhost:9092 --topic pubv2  --describe</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-console-producer.sh --bootstrap-server localhost:9092 --topic quickstart-events</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic quickstart-events --from-beginning</span> </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-topics.sh --bootstrap-server localhost:9092 --topic pubv2 --alter --partitions 16</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看所有消费者组</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-consumer-groups.sh --bootstrap-server localhost:9092 --list</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看某个消费者组的具体消费情况</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kafka-consumer-groups.sh --bootstrap-server localhost:9092 --group &lt;group_name&gt; --describe</span></span><br></pre></td></tr></table></figure>



<h1 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes"></a>Kubernetes</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> GO111MODULE=<span class="string">&quot;on&quot;</span> go get sigs.k8s.io/kind@v0.10.0</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kind create cluster</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kind version</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kind create cluster --name mohuishou</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kind get clusters</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kind delete cluster</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kind delete clusters mohuishou</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建一个多节点的集群</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kind create cluster --name mohuishou-ha --config kind-ha.yml</span></span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查询我们当前默认操作的集群是哪一个</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl config current-context</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置默认操作集群</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl config use-context &lt;context-name&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看集群信息</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl cluster-info [--context &lt;context-name&gt;]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看集群节点列表</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl get no</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 完成部署</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl apply -f nginx.yml</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除部署</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl delete -f nginx.yml</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前 deployment 的状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl get deployment</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 pod 的状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl get pods</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 端口转发功能来讲流量从本地转发给 k8s 集群</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl port-forward &lt;nginx-deployment-66b6c48dd5-2s5cb&gt; 30080:80</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl get pods -n kube-system</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl describe nodes</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> kubectl apply -f <span class="string">&quot;https://cloud.weave.works/k8s/net?k8s-version=<span class="subst">$(kubectl version | base64 | tr -d &#x27;\n&#x27;)</span>&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h1 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h1><p>开启任意来源</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo spctl –master-disable</span></span><br></pre></td></tr></table></figure>

<p>启动软件, 提示已损坏</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo xattr -d com.apple.quarantine /Applications/&lt;软件名字&gt;.app</span></span><br></pre></td></tr></table></figure>

<h2 id="重装系统后首先安装的-app"><a href="#重装系统后首先安装的-app" class="headerlink" title="重装系统后首先安装的 app"></a>重装系统后首先安装的 app</h2><ul>
<li>brew</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> /bin/bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>&quot;</span> <span class="comment"># 慢</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> https://zhuanlan.zhihu.com/p/90508170</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> https://brew.sh/index_zh-cn</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Command Line Tools</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> xcode-select --install</span></span><br></pre></td></tr></table></figure>

<ul>
<li>wget</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew install wget</span></span><br></pre></td></tr></table></figure>

<ul>
<li>zsh</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> https://segmentfault.com/a/1190000014992947</span></span><br></pre></td></tr></table></figure>

<ul>
<li>docker</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> https://docs.docker.com/docker-for-mac/install/</span></span><br><span class="line"></span><br><span class="line">换源</span><br><span class="line"><span class="meta">#</span><span class="bash"> https://juejin.cn/post/6844904202758520845</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>python3</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装 python3</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> https://www.runoob.com/note/52675</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 pip 和换源</span></span><br></pre></td></tr></table></figure>

<ul>
<li>protoc</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew install protobuf</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go install google.golang.org/protobuf/cmd/protoc-gen-go@v1.26</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PATH</span>:<span class="subst">$(go env GOPATH)</span>/bin&quot;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>apps</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- Transmit</span><br><span class="line">- BetterTouchTool</span><br><span class="line">- Golang</span><br><span class="line">- Alfred</span><br><span class="line">- Iterm2</span><br><span class="line">- 百度网盘</span><br><span class="line">- 滴答清单</span><br><span class="line">- 石墨文档</span><br><span class="line">- 天翼云盘</span><br><span class="line">- 微信</span><br><span class="line">- 迅雷</span><br><span class="line">- Another Desktop Manager</span><br><span class="line">- Commander One</span><br><span class="line">- Dozer</span><br><span class="line">- iStat Menus</span><br><span class="line">- Keka</span><br><span class="line">- Dr. Unarchiver-</span><br><span class="line">- Microsoft Edge</span><br><span class="line">- Microsoft Office</span><br><span class="line">- Movist</span><br><span class="line">- Navicat Premium</span><br><span class="line">- OpenVPN Connect</span><br><span class="line">- Parallels Desktop</span><br><span class="line">- PDF Expert</span><br><span class="line">- Postman</span><br><span class="line">- QQ</span><br><span class="line">- Typora</span><br><span class="line">- V2rayU</span><br><span class="line">- Visual Studio Code</span><br><span class="line">- Snipaste</span><br><span class="line">- Docker</span><br></pre></td></tr></table></figure>

<h2 id="修改文本默认打开工具"><a href="#修改文本默认打开工具" class="headerlink" title="修改文本默认打开工具"></a>修改文本默认打开工具</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew install duti</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 默认由 atom 打开</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> $ duti -s com.github.atom public.plain-text all</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> duti -s com.microsoft.VSCode public.plain-text all</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> duti -s com.microsoft.VSCode unix-executable all</span></span><br></pre></td></tr></table></figure>



<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><h2 id="win10-安装MySQL8-0"><a href="#win10-安装MySQL8-0" class="headerlink" title="win10 安装MySQL8.0"></a>win10 安装MySQL8.0</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaokang01/p/12092160.html">参考博客</a><br><a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/installer/">下载地址</a></p>
<h2 id="Navicat-连接mysql报1251错误"><a href="#Navicat-连接mysql报1251错误" class="headerlink" title="Navicat 连接mysql报1251错误"></a>Navicat 连接mysql报1251错误</h2><ol>
<li>打开MySQL Command Line Client</li>
<li>输入密码登录</li>
<li>ALTER USER ‘root‘@’localhost’ IDENTIFIED WITH mysql_native_password BY ‘你的密码’;</li>
<li>FLUSH PRIVILEGES;</li>
<li>OK, 可以连接了</li>
</ol>
<p> <img src="https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6/%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6_1626933474.png" alt="image-20210425102743749"></p>
<h1 id="noBB"><a href="#noBB" class="headerlink" title="noBB"></a>noBB</h1><h2 id="noBB-drf-更新代码后如何部署到云端"><a href="#noBB-drf-更新代码后如何部署到云端" class="headerlink" title="noBB_drf 更新代码后如何部署到云端"></a>noBB_drf 更新代码后如何部署到云端</h2><p>本地：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">&#x27;xxx&#x27;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push</span></span><br></pre></td></tr></table></figure>

<p>云端：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 通过 ssh 连接云服务器</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> apps/noBB_drf</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git pull</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl restart noBB-drf-mysql</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl restart noBB-drf</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl restart noBB-drf-nginx</span></span><br></pre></td></tr></table></figure>

<h2 id="云服务器重启后如何重新部署-noBB-drf"><a href="#云服务器重启后如何重新部署-noBB-drf" class="headerlink" title="云服务器重启后如何重新部署 noBB_drf"></a>云服务器重启后如何重新部署 noBB_drf</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> systemctl start docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisord -c /root/etc/supervisord.conf</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl restart noBB-drf-mysql</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl restart noBB-drf</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl restart noBB-drf-nginx</span></span><br></pre></td></tr></table></figure>





<h1 id="Python系列"><a href="#Python系列" class="headerlink" title="Python系列"></a>Python系列</h1><h2 id="win10新电脑装Pyhton3-6-4"><a href="#win10新电脑装Pyhton3-6-4" class="headerlink" title="win10新电脑装Pyhton3.6.4"></a>win10新电脑装Pyhton3.6.4</h2><ul>
<li><input disabled="" type="checkbox"> todo</li>
</ul>
<h2 id="x-在linux环境下运行定时脚本"><a href="#x-在linux环境下运行定时脚本" class="headerlink" title="x 在linux环境下运行定时脚本"></a>x 在linux环境下运行定时脚本</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># time.py</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;time.log&#x27;</span>, <span class="string">&#x27;a+&#x27;</span>) <span class="keyword">as</span> logfile:</span><br><span class="line">        logfile.write(<span class="string">&#x27;Hello, World!\n&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">$ nohup python time.py &amp;</span><br></pre></td></tr></table></figure>

<p>功能：实现了每秒将 “Hello, World!” 字符串，写入当前目录下的 time.log 文件中。</p>
<p>原理：利用 python 的无限循环 while(True) ，并使用 time.sleep() 方法设置相应的秒数时停，最后通过 nohup 和 &amp; 命令将脚本挂在后台不挂断的运行。</p>
<p>nohup command &amp;：在后台运行 command，原程序的标准输出和错误重定向到当前目录下的 nohup.out 文件中。如果当前目录的 nohup.out 文件不可写，输出重定向到 $HOME/nohup.out 文件中。</p>
<p>查看：通过 tail -f time.log 在当前终端追踪显示 time.log 文件，可用 Ctrl+c 中断显示。</p>
<p>中断：<br>通过 jobs 命令查看当前后台中运行的任务，再使用 fg %n 将第n项挂到前台，最后用 Ctrl+c 中断任务。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">jobs</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">fg</span> %[n]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ctrl+c</span></span><br></pre></td></tr></table></figure>

<p>或者通过 <code>ps aux | grep python</code> 命令查看 python 进程，找到挂起的脚本的 <code>PID</code> ，再使用 <code>kill -9 PID</code> 中断挂起的脚本。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ps aux | grep python</span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">kill</span> -9 [pid]</span></span><br></pre></td></tr></table></figure>




<h2 id="Anaconda3"><a href="#Anaconda3" class="headerlink" title="Anaconda3"></a>Anaconda3</h2><ul>
<li>下载安装</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">下载地址 https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a></p>
<p><img src="https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6/1625642964.png"></p>
<ul>
<li>conda 换源</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> conda config --<span class="built_in">set</span> show_channel_urls yes</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除channels</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> conda config --remove channels xxx</span>  </span><br><span class="line"><span class="meta">#</span><span class="bash"> 备用</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch</span></span><br></pre></td></tr></table></figure>

<ul>
<li>pip换源</li>
</ul>
<p>C:\Users\USERNAME\pip\pip.ini</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url=https://pypi.tuna.tsinghua.edu.cn/simple </span><br><span class="line">[install]  </span><br><span class="line">trusted-host=pypi.tuna.tsinghua.edu.cn</span><br><span class="line">disable-pip-version-check = true  </span><br><span class="line">timeout = 6000 </span><br></pre></td></tr></table></figure>

<ul>
<li>conda 命令</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> conda list</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> conda env list</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> activite xxx</span></span><br></pre></td></tr></table></figure>





<h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="win10安装redis"><a href="#win10安装redis" class="headerlink" title="win10安装redis"></a>win10安装redis</h2><p>下载Redis安装包，网址<a target="_blank" rel="noopener" href="https://github.com/MicrosoftArchive/redis/releases/tag/win-3.2.100%EF%BC%8C%E4%B8%8B%E8%BD%BDzip%E6%96%87%E4%BB%B6">https://github.com/MicrosoftArchive/redis/releases/tag/win-3.2.100，下载zip文件</a><br>解压<br>打开<code>cmd</code>至文件夹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> redis-server redis.windows.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置服务</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> redis-server.exe --service-install redis.windows.conf --loglevel verbose</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> redis-server --service-start</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 卸载服务</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> redis-server  --service-uninstall</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止服务</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> redis-server  --service-stop</span></span><br></pre></td></tr></table></figure>

<p>默认端口 6379</p>
<h2 id="测试缓存是否成功"><a href="#测试缓存是否成功" class="headerlink" title="测试缓存是否成功"></a>测试缓存是否成功</h2><p>本步骤非必须，只是为了测试看可否正常使用redis。<br>进入django的后台命令模式：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> python manage.py shell</span></span><br></pre></td></tr></table></figure>

<p>逐条输入如下命令测试：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.core.cache <span class="keyword">import</span> cache <span class="comment"># 引入缓存模块</span></span><br><span class="line">cache.<span class="built_in">set</span>(<span class="string">&#x27;v&#x27;</span>, <span class="string">&#x27;555&#x27;</span>, <span class="number">60</span>*<span class="number">60</span>)      <span class="comment"># 写入key为v，值为555的缓存，有效期30分钟</span></span><br><span class="line">cache.has_key(<span class="string">&#x27;v&#x27;</span>) <span class="comment"># 判断key为v是否存在</span></span><br><span class="line">cache.get(<span class="string">&#x27;v&#x27;</span>)     <span class="comment"># 获取key为v的缓存</span></span><br></pre></td></tr></table></figure>

<h2 id="基于-Docker-部署-Redis-集群"><a href="#基于-Docker-部署-Redis-集群" class="headerlink" title="基于 Docker 部署 Redis 集群"></a>基于 Docker 部署 Redis 集群</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://lilogs.com/archives/1089.html</span><br></pre></td></tr></table></figure>

<h2 id="查看-Redis-容器版本"><a href="#查看-Redis-容器版本" class="headerlink" title="查看 Redis 容器版本"></a>查看 Redis 容器版本</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it redis redis-server -v</span></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- Redis daemonize介绍</span><br><span class="line">一、Redis daemonize介绍</span><br><span class="line">1、daemonize介绍</span><br><span class="line"></span><br><span class="line">A、redis.conf配置文件中daemonize守护线程，默认是NO。</span><br><span class="line">B、daemonize是用来指定redis是否要用守护线程的方式启动。</span><br><span class="line">2、daemonize 设置yes或者no区别</span><br><span class="line"></span><br><span class="line">daemonize:yes:redis采用的是单进程多线程的模式。当redis.conf中选项daemonize设置成yes时，代表开启守护进程模式。在该模式下，redis会在后台运行，并将进程pid号写入至redis.conf选项pidfile设置的文件中，此时redis将一直运行，除非手动kill该进程。</span><br><span class="line">daemonize:no: 当daemonize选项设置成no时，当前界面将进入redis的命令行界面，exit强制退出或者关闭连接工具(putty,xshell等)都会导致redis进程退出。</span><br><span class="line"></span><br><span class="line">-- 配置文件</span><br><span class="line"># 访问密码</span><br><span class="line">requirepass</span><br><span class="line"></span><br><span class="line"># 持久化数据</span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">daemonize no</span><br></pre></td></tr></table></figure>



<h1 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h1><ul>
<li><strong>Shell多个命令间隔符号;和&amp;和&amp;&amp;区别</strong></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 三个命令同时执行</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> command1 &amp; command2 &amp; command3</span>     </span><br><span class="line"><span class="meta">#</span><span class="bash"> 不管前面命令执行成功没有，后面的命令继续执行</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> command1; command2; command3</span>          </span><br><span class="line"><span class="meta">#</span><span class="bash"> 只有前面命令执行成功，后面命令才继续执行</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> command1 &amp;&amp; command2</span>                         </span><br></pre></td></tr></table></figure>



<h2 id="Curl"><a href="#Curl" class="headerlink" title="Curl"></a>Curl</h2><p><code>-d</code> 参数用于发送 POST 请求的数据体。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -d<span class="string">&#x27;login=emma＆password=123&#x27;</span>-X POST https://google.com/login</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">$ curl -d <span class="string">&#x27;login=emma&#x27;</span> -d <span class="string">&#x27;password=123&#x27;</span> -X POST  https://google.com/login</span><br></pre></td></tr></table></figure>


<p>使用<code>-d</code>参数以后，HTTP 请求会自动加上标头<code>Content-Type : application/x-www-form-urlencoded</code>。并且会自动将请求转为 POST 方法，因此可以省略<code>-X POST</code>。</p>
<p><code>-d</code>参数可以读取本地文本文件的数据，向服务器发送。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -d <span class="string">&#x27;@data.txt&#x27;</span> https://google.com/login</span><br></pre></td></tr></table></figure>

<p>上面命令读取<code>data.txt</code>文件的内容，作为数据体向服务器发送。</p>
<h2 id="df"><a href="#df" class="headerlink" title="df"></a>df</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看硬盘使用情况</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> df -h</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看各个文件夹大小</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> du -sh *</span></span><br></pre></td></tr></table></figure>



<h1 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h1><h2 id="密钥免密登录"><a href="#密钥免密登录" class="headerlink" title="密钥免密登录"></a>密钥免密登录</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vim ~/.ssh/config</span></span><br><span class="line">Host test1 #  设置ssh host缩写</span><br><span class="line">Hostname xxx.xxx.xxx.xxx #  服务器ip</span><br><span class="line">User xxx #  服务器用户名</span><br><span class="line">Port 22 #  服务器端口</span><br><span class="line">IdentityFile ~/.ssh/xxx_pk #  密钥ssh</span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod 700 ~/.ssh/xxx_pk</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh test1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.235.22</span></span><br><span class="line">Host test1 #  设置ssh host缩写</span><br><span class="line">Hostname xxx.xxx.xxx.xxx #  服务器ip</span><br><span class="line">User xxx #  服务器用户名</span><br><span class="line">Port 22 #  服务器端口</span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh test1</span></span><br></pre></td></tr></table></figure>



<h1 id="Supervisor"><a href="#Supervisor" class="headerlink" title="Supervisor"></a>Supervisor</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ubuntu</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> apt-get install supervisor</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chmod 777 /var/run</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chmod 777 /etc/supervisor</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> centos</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装supervisor</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yum install -y supervisor</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开机启动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl <span class="built_in">enable</span> supervisord</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动supervisord</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl start supervisord</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看状态</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl status supervisord</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[program:sync_goods_to_es]</span><br><span class="line">process_name=%(program_name)s_%(process_num)02d</span><br><span class="line">command=php artisan command.sync.goods.to.es  ;被监控的进程路径</span><br><span class="line">priority=999 ;优先级，数值越低越先启动而越后关闭 (default 999)</span><br><span class="line">autostart=true ;随着supervisord的启动而启动</span><br><span class="line">autorestart=true ;自动重启</span><br><span class="line">user=root ;用哪个用户启动进程，默认是root</span><br><span class="line">numprocs=1 ;启动几个进程</span><br><span class="line">redirect_stderr=true ;重定向stderr到stdout</span><br><span class="line">stdout_logfile=/data0/log-data/service.log;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ??? sudo unlink /var/run/supervisor.sock</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisord -c /etc/supervisord.conf</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 部分命令</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl reload <span class="comment">#  重新加载 supervisord.conf 配置文件并重启 supervisord</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl status <span class="comment">#  查看进程运行状态</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl start &lt;进程名&gt; <span class="comment">#  启动进程</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl stop &lt;进程名&gt;  <span class="comment">#  关闭进程</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl restart &lt;进程名&gt; <span class="comment">#  重启进程</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl update <span class="comment">#  重新载入配置文件</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl shutdown <span class="comment">#  关闭supervisord</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl clear &lt;进程名&gt; <span class="comment">#  清空进程日志</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl <span class="comment">#  进入到交互模式下。使用help查看所有命令。</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> start stop restart + all 表示启动，关闭，重启所有进程。</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭命令</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> supervisorctl stop all  <span class="comment">#  先关闭supervisor服务</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ps aux | grep supervisord</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">kill</span> -9 &lt;pid&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ vim supervisor.conf</span><br><span class="line">[supervisord]</span><br><span class="line">logfile=/var/log/supervisor/supervisord.log ; (main log file;default $CWD/supervisord.log)</span><br><span class="line">pidfile=/var/run/supervisord.pid ; (supervisord pidfile;default supervisord.pid)</span><br><span class="line">childlogdir=/var/log/supervisor            ; (&#x27;AUTO&#x27; child log dir, default $TEMP)</span><br><span class="line">environment = GOLANG_PROTOBUF_REGISTRATION_CONFLICT=&quot;warn&quot;</span><br><span class="line"></span><br><span class="line">$ supervisorctl reload</span><br></pre></td></tr></table></figure>



<h1 id="Swagger"><a href="#Swagger" class="headerlink" title="Swagger"></a>Swagger</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> go get -u github.com/swaggo/swag/cmd/swag</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go get -u github.com/swaggo/gin-swagger</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go get -u github.com/swaggo/files</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> swag init -g server/http/http.go</span></span><br></pre></td></tr></table></figure>



<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	swaggerFiles <span class="string">&quot;github.com/swaggo/files&quot;</span></span><br><span class="line">	ginSwagger <span class="string">&quot;github.com/swaggo/gin-swagger&quot;</span></span><br><span class="line">  </span><br><span class="line">  _ <span class="string">&quot;github.com/xxx/docs&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// swage 文档访问路由</span></span><br><span class="line">eng := gin.Default()</span><br><span class="line">eng.GET(<span class="string">&quot;/swagger/*any&quot;</span>, ginSwagger.WrapHandler(swaggerFiles.Handler))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ul>
<li><p>注释参数</p>
</li>
<li><p>main.go</p>
</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @title Golang Esign API</span></span><br><span class="line"><span class="comment">// @version 1.0</span></span><br><span class="line"><span class="comment">// @description  Golang api of demo</span></span><br><span class="line"><span class="comment">// @termsOfService http://github.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// @contact.name API Support</span></span><br><span class="line"><span class="comment">// @contact.url http://www.cnblogs.com</span></span><br><span class="line"><span class="comment">// @contact.email ×××@qq.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//@host 127.0.0.1:8081</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>控制器注释（congroller.go） get</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> GetOperationLogListResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">    List  *[]model.OperationLog <span class="string">`json:&quot;list&quot;`</span></span><br><span class="line">    Total <span class="keyword">int</span>                   <span class="string">`json:&quot;total&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @Title xxx</span></span><br><span class="line"><span class="comment">// @Author chy@33.cn</span></span><br><span class="line"><span class="comment">// @Description xxx</span></span><br><span class="line"><span class="comment">// @Tags tag</span></span><br><span class="line"><span class="comment">// @Param Authorization	header string true &quot;Bearer 31a165baebe6dec616b1f8f3207b4273&quot;</span></span><br><span class="line"><span class="comment">// @Param route formData string false &quot;路由&quot;</span></span><br><span class="line"><span class="comment">// @Param operator formData string false &quot;操作者&quot;</span></span><br><span class="line"><span class="comment">// @Param operation_type formData string false &quot;操作类型 1 新增、2 删除、3 更新&quot;</span></span><br><span class="line"><span class="comment">// @Param description formData string false &quot;操作描述&quot;</span></span><br><span class="line"><span class="comment">// @Param start_time formData string false &quot;开始时间&quot;</span></span><br><span class="line"><span class="comment">// @Param end_time formData string false &quot;结束时间&quot;</span></span><br><span class="line"><span class="comment">// @Param page formData string true &quot;页数&quot;</span></span><br><span class="line"><span class="comment">// @Param size formData string true &quot;数据条数&quot;</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;object&#125; GetOperationLogListResponse</span></span><br><span class="line"><span class="comment">// @Router	/api/v1/app/operationlog/appcenter [get]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetOperationLogList</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>post</li>
</ul>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ReleaseTemplateAdd <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name               <span class="keyword">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">    DeployEnv          <span class="keyword">string</span> <span class="string">`json:&quot;deploy_env&quot;`</span></span><br><span class="line">    GitlabType         <span class="keyword">int</span>    <span class="string">`json:&quot;gitlab_type&quot;`</span></span><br><span class="line">    GitlabBranchName   <span class="keyword">string</span> <span class="string">`json:&quot;gitlab_branch_name&quot;`</span></span><br><span class="line">    IsAutoRelease      <span class="keyword">int</span>    <span class="string">`json:&quot;is_auto_release&quot;`</span></span><br><span class="line">    Description        <span class="keyword">string</span> <span class="string">`json:&quot;description&quot;`</span></span><br><span class="line">    GitlabCITemplateID <span class="keyword">int32</span>  <span class="string">`json:&quot;gitlab_ci_template_id&quot;`</span></span><br><span class="line">    GitlabID           <span class="keyword">uint32</span> <span class="string">`json:&quot;gitlab_id&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// @Title 新增模版</span></span><br><span class="line"><span class="comment">// @Author mengyilingjian@outlook.com</span></span><br><span class="line"><span class="comment">// @Description 新增模版</span></span><br><span class="line"><span class="comment">// @Tags release template</span></span><br><span class="line"><span class="comment">// @Param Authorization	header	string true &quot;Bearer 31a165baebe6dec616b1f8f3207b4273&quot;</span></span><br><span class="line"><span class="comment">// @Param body body	ReleaseTemplateAdd true &quot;JSON数据&quot;</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;object&#125; handler.ReportJSONResult</span></span><br><span class="line"><span class="comment">// @Router	/api/v1/release/template/add [post]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ReleaseTemplateAdd</span><span class="params">(c *gin.Context)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h1><h2 id="ZSH"><a href="#ZSH" class="headerlink" title="ZSH"></a>ZSH</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt upgrade</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install curl wget git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install zsh</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> powerlevel10k</span></span><br><span class="line">GitHub - romkatv/powerlevel10k: A Zsh theme</span><br></pre></td></tr></table></figure>



<h2 id="Docker-1"><a href="#Docker-1" class="headerlink" title="Docker"></a>Docker</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker</span></span><br><span class="line">Install Docker Engine on Ubuntu | Docker Documentation</span><br><span class="line">要创建 docker 组并添加用户：</span><br><span class="line"></span><br><span class="line">(1).创建 docker 组</span><br><span class="line">sudo groupadd docker</span><br><span class="line"></span><br><span class="line">(2).将自己的用户添加到 docker 组中：</span><br><span class="line">sudo usermod -aG docker 用户名</span><br><span class="line"></span><br><span class="line">(3).注销并重新登陆以重新验证组成员关系。</span><br><span class="line">如果在虚拟机上进行测试，则可能需要重新启动虚拟机才能使更改生效。</span><br><span class="line"></span><br><span class="line">sudo service docker restart</span><br><span class="line"></span><br><span class="line">(4).验证不需要 sudo 运行 docker 命令：</span><br><span class="line">docker run hello-world</span><br><span class="line"></span><br><span class="line">2.配置 Docker 在启动时启动</span><br><span class="line">sudo systemctl enable docker</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> docker-compose</span></span><br><span class="line">4.安装 docker-compose</span><br><span class="line">(1).运行以下命令下载最新版本的 docker-compose：</span><br><span class="line">sudo curl -L https://github.com/docker/compose/releases/download/1.18.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose  </span><br><span class="line">(2).更改二进制文件的权限，使其能够运行：</span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br><span class="line">(3).测试安装：</span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>





<h2 id="安装-Go"><a href="#安装-Go" class="headerlink" title="安装 Go"></a>安装 Go</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载 go 语言包</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo tar -C /usr/<span class="built_in">local</span> -xzf go1.8beta1.linux-amd64.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /home/xxx/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo mkdir go</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod 777 go</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir &#123;src,pkg,bin&#125;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo chmod 777 &#123;src,pkg,bin&#125;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ~</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim .bashrc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/go/bin</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> GOPATH=/home/xxx/go</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> .bashrc</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go env</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> go version</span></span><br></pre></td></tr></table></figure>

<h2 id="安装-git"><a href="#安装-git" class="headerlink" title="安装 git"></a>安装 git</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install git</span></span><br></pre></td></tr></table></figure>

<h2 id="增加文件句柄"><a href="#增加文件句柄" class="headerlink" title="增加文件句柄"></a>增加文件句柄</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">ulimit</span> -n 12480</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果想持久化该属性, 可以把这句话加入 /etc/profile</span></span><br></pre></td></tr></table></figure>



<h1 id="VIM"><a href="#VIM" class="headerlink" title="VIM"></a>VIM</h1><ul>
<li><strong>删除一整行</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dd</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>删除多行</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">比如要删除8-17行，在VIM模式下，输入:8,17d，即可将8-17行全部删除。</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>如何在VIM中显示行号：</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在VIM命令模式下，输入:set nu。</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>误删后如何恢复：</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在VIM命令模式下，输入u。（与u相反的操作 Ctrl-r）</span><br></pre></td></tr></table></figure>

<h1 id="VMWARE"><a href="#VMWARE" class="headerlink" title="VMWARE"></a>VMWARE</h1><h2 id="win10-vmware与Hyper-V不兼容"><a href="#win10-vmware与Hyper-V不兼容" class="headerlink" title="win10 vmware与Hyper-V不兼容"></a>win10 vmware与Hyper-V不兼容</h2><p>打开控制面板，找到程序与功能，然后点击傍边的-启用或关闭Windows功能，找到里面的Hyper-V选项，取消勾选。</p>
<p>Windows PowerShell（管理员）<br>运行命令：bcdedit /set hypervisorlaunchtype off</p>
<p>“win+ R“打开运行，输入gpedit.msc<br>本地计算机策略 –&gt; 计算机配置 –&gt; 管理模板&gt;系统 –&gt; Device Guard<br>基于虚拟化的安全设置为“已禁用”</p>
<p>重新启动。</p>
<h1 id="搜狗输入法"><a href="#搜狗输入法" class="headerlink" title="搜狗输入法"></a>搜狗输入法</h1><ul>
<li>自定义短语</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#$year_$month_$day_$fullhour_$minute_$second</span><br><span class="line">2021_07_13_15_58_43</span><br></pre></td></tr></table></figure>



</article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/wallpaper/wallpaper_1626846848.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2021/11/11/%E6%9D%A5%E8%AF%B4%E8%AF%B4%E8%BF%99%E4%BA%9B%E5%B9%B4%E7%9B%B8%E4%BA%B2%E9%81%87%E5%88%B0%E7%9A%84%E5%A5%B3%E6%96%B9%E4%BC%8E%E4%BF%A9/"><img class="prev-cover" src="http://chy-cdn.oss-cn-hangzhou.aliyuncs.com/blog/default_cover00004.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">&lt;转载&gt; 来说说这些年相亲遇到的女方伎俩</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E6%93%8D%E4%BD%9C%E7%99%BD%E7%9A%AE%E4%B9%A6"><span class="toc-number">1.</span> <span class="toc-text">各种情况下的操作白皮书</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CentOS"><span class="toc-number">2.</span> <span class="toc-text">CentOS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85ZSH"><span class="toc-number">2.1.</span> <span class="toc-text">安装ZSH</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Git"><span class="toc-number">2.2.</span> <span class="toc-text">安装Git</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Docker"><span class="toc-number">2.3.</span> <span class="toc-text">安装Docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Python"><span class="toc-number">2.4.</span> <span class="toc-text">安装Python</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pip%E6%8D%A2%E6%BA%90"><span class="toc-number">2.5.</span> <span class="toc-text">pip换源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">2.6.</span> <span class="toc-text">防火墙</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%86%E5%8F%B2%E5%91%BD%E4%BB%A4%E6%9F%A5%E6%89%BE%E5%B7%A5%E5%85%B7FZF"><span class="toc-number">2.7.</span> <span class="toc-text">历史命令查找工具FZF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E5%8D%A0%E7%94%A8CPU-%E5%86%85%E5%AD%98%E6%9C%80%E5%A4%9A%E7%9A%8410%E4%B8%AA%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.8.</span> <span class="toc-text">查看当前占用CPU&#x2F;内存最多的10个进程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Django"><span class="toc-number">3.</span> <span class="toc-text">Django</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1-%E5%A4%B1%E8%B4%A5%EF%BC%8C%E6%B2%A1%E6%9C%89%E6%88%90%E5%8A%9F"><span class="toc-number">3.1.</span> <span class="toc-text">定时任务(失败，没有成功)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker"><span class="toc-number">4.</span> <span class="toc-text">Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">4.1.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-compose"><span class="toc-number">4.2.</span> <span class="toc-text">docker-compose</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8Bvolumes%E6%8C%82%E8%BD%BD%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">4.3.</span> <span class="toc-text">查看volumes挂载的位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dockerfile"><span class="toc-number">4.4.</span> <span class="toc-text">Dockerfile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E9%95%9C%E5%83%8F"><span class="toc-number">4.5.</span> <span class="toc-text">发布镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3"><span class="toc-number">4.6.</span> <span class="toc-text">错误解决</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%AF%8F%E6%AC%A1%E8%BF%90%E8%A1%8C%E9%83%BD%E9%9C%80%E8%A6%81-sudo"><span class="toc-number">4.7.</span> <span class="toc-text">解决每次运行都需要 sudo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8D%A2%E6%BA%90"><span class="toc-number">4.8.</span> <span class="toc-text">换源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#io-timeout"><span class="toc-number">4.9.</span> <span class="toc-text">io&#x2F;timeout</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%85%E7%90%86%E7%A9%BA%E9%97%B4"><span class="toc-number">4.10.</span> <span class="toc-text">清理空间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bind-%E5%92%8C-volume-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">4.11.</span> <span class="toc-text">bind 和 volume 的区别</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Etcd"><span class="toc-number">5.</span> <span class="toc-text">Etcd</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#fail2ban"><span class="toc-number">6.</span> <span class="toc-text">fail2ban</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Git"><span class="toc-number">7.</span> <span class="toc-text">Git</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-1"><span class="toc-number">7.1.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%8D%E5%AF%86%E8%AE%BF%E9%97%AE%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93"><span class="toc-number">7.2.</span> <span class="toc-text">免密访问私有仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#git-commit-%E6%A0%87%E5%87%86"><span class="toc-number">7.3.</span> <span class="toc-text">git commit 标准</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%B7%B2%E6%8F%90%E4%BA%A4%E7%9A%84-commit-%E4%BF%A1%E6%81%AF"><span class="toc-number">7.4.</span> <span class="toc-text">修改已提交的 commit 信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E5%A4%9A%E6%AC%A1-commit"><span class="toc-number">7.5.</span> <span class="toc-text">合并多次 commit</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gitignore"><span class="toc-number">7.6.</span> <span class="toc-text">.gitignore</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Go"><span class="toc-number">8.</span> <span class="toc-text">Go</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8%E6%96%B0%E7%9A%84win10%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AEGo%E7%8E%AF%E5%A2%83"><span class="toc-number">8.1.</span> <span class="toc-text">如何在新的win10系统配置Go环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mac-%E5%8D%87%E7%BA%A7-Go-%E7%89%88%E6%9C%AC"><span class="toc-number">8.2.</span> <span class="toc-text">Mac 升级 Go 版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#go-proxy"><span class="toc-number">8.3.</span> <span class="toc-text">go proxy</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#go-%E7%A7%81%E6%9C%89%E5%BA%93"><span class="toc-number">8.4.</span> <span class="toc-text">go 私有库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Goland"><span class="toc-number">9.</span> <span class="toc-text">Goland</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">9.1.</span> <span class="toc-text">快捷键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%87%8D%E7%BD%AE%E8%AF%95%E7%94%A8%E6%97%B6%E9%97%B4"><span class="toc-number">9.2.</span> <span class="toc-text">自动重置试用时间</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Hexo"><span class="toc-number">10.</span> <span class="toc-text">Hexo</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Iterm2"><span class="toc-number">11.</span> <span class="toc-text">Iterm2</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Kafka"><span class="toc-number">12.</span> <span class="toc-text">Kafka</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">12.1.</span> <span class="toc-text">知识点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Kubernetes"><span class="toc-number">13.</span> <span class="toc-text">Kubernetes</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux"><span class="toc-number">14.</span> <span class="toc-text">Linux</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mac"><span class="toc-number">15.</span> <span class="toc-text">Mac</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F%E5%90%8E%E9%A6%96%E5%85%88%E5%AE%89%E8%A3%85%E7%9A%84-app"><span class="toc-number">15.1.</span> <span class="toc-text">重装系统后首先安装的 app</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E6%9C%AC%E9%BB%98%E8%AE%A4%E6%89%93%E5%BC%80%E5%B7%A5%E5%85%B7"><span class="toc-number">15.2.</span> <span class="toc-text">修改文本默认打开工具</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL"><span class="toc-number">16.</span> <span class="toc-text">MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#win10-%E5%AE%89%E8%A3%85MySQL8-0"><span class="toc-number">16.1.</span> <span class="toc-text">win10 安装MySQL8.0</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Navicat-%E8%BF%9E%E6%8E%A5mysql%E6%8A%A51251%E9%94%99%E8%AF%AF"><span class="toc-number">16.2.</span> <span class="toc-text">Navicat 连接mysql报1251错误</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#noBB"><span class="toc-number">17.</span> <span class="toc-text">noBB</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#noBB-drf-%E6%9B%B4%E6%96%B0%E4%BB%A3%E7%A0%81%E5%90%8E%E5%A6%82%E4%BD%95%E9%83%A8%E7%BD%B2%E5%88%B0%E4%BA%91%E7%AB%AF"><span class="toc-number">17.1.</span> <span class="toc-text">noBB_drf 更新代码后如何部署到云端</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%87%8D%E5%90%AF%E5%90%8E%E5%A6%82%E4%BD%95%E9%87%8D%E6%96%B0%E9%83%A8%E7%BD%B2-noBB-drf"><span class="toc-number">17.2.</span> <span class="toc-text">云服务器重启后如何重新部署 noBB_drf</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E7%B3%BB%E5%88%97"><span class="toc-number">18.</span> <span class="toc-text">Python系列</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#win10%E6%96%B0%E7%94%B5%E8%84%91%E8%A3%85Pyhton3-6-4"><span class="toc-number">18.1.</span> <span class="toc-text">win10新电脑装Pyhton3.6.4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#x-%E5%9C%A8linux%E7%8E%AF%E5%A2%83%E4%B8%8B%E8%BF%90%E8%A1%8C%E5%AE%9A%E6%97%B6%E8%84%9A%E6%9C%AC"><span class="toc-number">18.2.</span> <span class="toc-text">x 在linux环境下运行定时脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Anaconda3"><span class="toc-number">18.3.</span> <span class="toc-text">Anaconda3</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis"><span class="toc-number">19.</span> <span class="toc-text">Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#win10%E5%AE%89%E8%A3%85redis"><span class="toc-number">19.1.</span> <span class="toc-text">win10安装redis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%BC%93%E5%AD%98%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F"><span class="toc-number">19.2.</span> <span class="toc-text">测试缓存是否成功</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E-Docker-%E9%83%A8%E7%BD%B2-Redis-%E9%9B%86%E7%BE%A4"><span class="toc-number">19.3.</span> <span class="toc-text">基于 Docker 部署 Redis 集群</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B-Redis-%E5%AE%B9%E5%99%A8%E7%89%88%E6%9C%AC"><span class="toc-number">19.4.</span> <span class="toc-text">查看 Redis 容器版本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell"><span class="toc-number">20.</span> <span class="toc-text">Shell</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Curl"><span class="toc-number">20.1.</span> <span class="toc-text">Curl</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#df"><span class="toc-number">20.2.</span> <span class="toc-text">df</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SSH"><span class="toc-number">21.</span> <span class="toc-text">SSH</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%86%E9%92%A5%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95"><span class="toc-number">21.1.</span> <span class="toc-text">密钥免密登录</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Supervisor"><span class="toc-number">22.</span> <span class="toc-text">Supervisor</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">22.0.1.</span> <span class="toc-text">配置环境变量</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Swagger"><span class="toc-number">23.</span> <span class="toc-text">Swagger</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Ubuntu"><span class="toc-number">24.</span> <span class="toc-text">Ubuntu</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ZSH"><span class="toc-number">24.1.</span> <span class="toc-text">ZSH</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-1"><span class="toc-number">24.2.</span> <span class="toc-text">Docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Go"><span class="toc-number">24.3.</span> <span class="toc-text">安装 Go</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-git"><span class="toc-number">24.4.</span> <span class="toc-text">安装 git</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84"><span class="toc-number">24.5.</span> <span class="toc-text">增加文件句柄</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VIM"><span class="toc-number">25.</span> <span class="toc-text">VIM</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VMWARE"><span class="toc-number">26.</span> <span class="toc-text">VMWARE</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#win10-vmware%E4%B8%8EHyper-V%E4%B8%8D%E5%85%BC%E5%AE%B9"><span class="toc-number">26.1.</span> <span class="toc-text">win10 vmware与Hyper-V不兼容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95"><span class="toc-number">27.</span> <span class="toc-text">搜狗输入法</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://chy-cdn.oss-cn-hangzhou.aliyuncs.com/wallpaper/wallpaper_1626846848.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By chy</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>